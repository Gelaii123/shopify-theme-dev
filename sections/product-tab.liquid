{{ 'product-tab.css' | asset_url | stylesheet_tag }}

{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
    background-image: url({{ section.settings.bg_image | image_url }}) !important;
    background-size: cover !important;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
{%- endstyle -%}

<style></style>

<div class="section-{{ section.id }}-padding gradient color-{{ section.settings.section_color_scheme }} product-tab-section section">
  <div class="page-width">
    <div class="product-tab__content">
        <div class="product-tab__left">
            {% if product.metafields.custom.tab_1_title %}
                <button class="product-tab__button product-tab__button--1 active" data-aos="fade-up">{{ product.metafields.custom.tab_1_title }}</button>
            {% endif %}
            {% if product.metafields.custom.tab_2_title %}
                <button class="product-tab__button product-tab__button--2" data-aos="fade-up">{{ product.metafields.custom.tab_2_title }}</button>
            {% endif %}
            {% if product.metafields.custom.tab_2_title %}
                <button class="product-tab__button product-tab__button--3" data-aos="fade-up">{{ product.metafields.custom.tab_3_title }}</button>
            {% endif %}
            {% if product.metafields.custom.tab_3_title %}
                <button class="product-tab__button product-tab__button--4" data-aos="fade-up">{{ product.metafields.custom.tab_4_title }}</button>
            {% endif %}
        </div>
        <div class="product-tab__right">
            <div class="product-tab__right--content product-tab__right--content-1 active">
                {% if product.metafields.custom.tab_1_title %}
                    <h2 class="product-tab-heading" data-aos="fade-up">{{ product.metafields.custom.tab_1_title }}</h2>
                {% endif %}
                {% if product.metafields.custom.tab_1_item_heading.value %}
                    <div class="product-tab__item-list">
                        {% for heading in product.metafields.custom.tab_1_item_heading.value %}
                            <div class="product-tab-list__item" data-aos="fade-up">
                                {% render 'svg-circle-check' %}
                                <div class="product-tab__item-content">
                                    {% assign index = forloop.index %}
                                    <h4>{{ heading }}</h4> 
                                    {% for content in product.metafields.custom.tab_1_item_content.value %}
                                        {% if forloop.index == index %}
                                            <p>{{ content }}</p>
                                        {% endif %}
                                    {% endfor %}
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>

            <div class="product-tab__right--content product-tab__right--content-2">
                {% if product.metafields.custom.tab_2_title %}
                    <h2 class="product-tab-heading" data-aos="fade-up">{{ product.metafields.custom.tab_2_title }}</h2>
                {% endif %}

                {% if product.metafields.custom.tab_2_video.value %}
                    {% assign video = product.metafields.custom.tab_2_video.value %}
                    {% render 'video',
                        video: video,
                        video_class: 'spacing-style size-style border-style',
                        video_style: video_style,
                        video_preview_image: video.preview_image,
                        section_id: section.id
                    %}
                {% endif %}
                {% if product.metafields.custom.tab_2_item_heading.value %}
                    <div class="product-tab__item-list product-tab__item-list--2">
                        {% for heading in product.metafields.custom.tab_2_item_heading.value %}
                            <div class="product-tab-list__item" data-aos="fade-up">
                                <div class="product-tab__item-index">
                                    0{{ forloop.index }}
                                </div>
                                <div class="product-tab__item-content">
                                    {% assign index = forloop.index %}
                                    <h4>{{ heading }}</h4> 
                                    {% for content in product.metafields.custom.tab_2_item_content.value %}
                                        {% if forloop.index == index %}
                                            <p>{{ content }}</p>
                                        {% endif %}
                                    {% endfor %}
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>

            <div class="product-tab__right--content product-tab__right--content-3">
                {% if product.metafields.custom.tab_3_title %}
                    <h2 class="product-tab-heading" data-aos="fade-up">{{ product.metafields.custom.tab_3_title }}</h2>
                {% endif %}
                
                {% if product.metafields.custom.tab_3_item_heading.value %}
                    <div class="product-tab__item-list product-tab__item-list--3">
                        {% for heading in product.metafields.custom.tab_3_item_heading.value %}
                            <div class="product-tab-list__item" data-aos="fade-up">
                                <div class="product-tab__item-icon">
                                    {% assign index = forloop.index %}
                                    {% if product.metafields.custom.tab_3_item_icon.value %}
                                        {% for icon in product.metafields.custom.tab_3_item_icon.value %}
                                            {% if forloop.index == index %}
                                                <img src="{{ icon | image_url }}" width="20" height= "20" loading="lazy">
                                            {% endif %}
                                        {% endfor %}
                                    {% endif %}
                                </div>
                                <div class="product-tab__item-content">
                                    {% assign index = forloop.index %}
                                    <h4>{{ heading }}</h4> 
                                    {% for content in product.metafields.custom.tab_3_item_content.value %}
                                        {% if forloop.index == index %}
                                            <p>{{ content }}</p>
                                        {% endif %}
                                    {% endfor %}
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>

            <div class="product-tab__right--content product-tab__right--content-4">
                {% if product.metafields.custom.tab_4_title %}
                    <h2 class="product-tab-heading" data-aos="fade-up">{{ product.metafields.custom.tab_4_title }}</h2>
                {% endif %}
                
                {% if product.metafields.custom.tab_4_item_heading.value %}
                    <div class="product-tab__item-list product-tab__item-list--2">
                        {% for heading in product.metafields.custom.tab_4_item_heading.value %}
                            <div class="product-tab-list__item" data-aos="fade-up">
                                <div class="product-tab__item-icon">
                                    {% assign index = forloop.index %}
                                    {% if product.metafields.custom.tab_3_item_icon.value %}
                                        {% for icon in product.metafields.custom.tab_3_item_icon.value %}
                                            {% if forloop.index == index %}
                                                <img src="{{ icon | image_url }}" width="20" height= "20" loading="lazy">
                                            {% endif %}
                                        {% endfor %}
                                    {% endif %}
                                </div>
                                <div class="product-tab__item-content">
                                    {% assign index = forloop.index %}
                                    <h4>{{ heading }}</h4> 
                                    {% for content in product.metafields.custom.tab_4_item_content.value %}
                                        {% if forloop.index == index %}
                                            <p>{{ content }}</p>
                                        {% endif %}
                                    {% endfor %}
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
  </div>
</div>

<script>
    const buttons = document.querySelectorAll('.product-tab__left button');
    const contents = document.querySelectorAll('.product-tab__right--content');

    buttons.forEach((btn, index) => {
        btn.addEventListener('click', () => {
            contents.forEach(c => c.classList.remove('active'));
            buttons.forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            document.querySelector('.product-tab__right--content-' + (index + 1)).classList.add('active');
        });
    });

</script>

{% schema %}
{
  "name": "Product tab",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "header",
      "content": "Padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding top",
      "default": 36
    },
    {
      "type": "range", 
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding bottom",
      "default": 36
    }
  ],
  "presets": [
    {
      "name": "Product tab"
    }
  ]
}
{% endschema %}
